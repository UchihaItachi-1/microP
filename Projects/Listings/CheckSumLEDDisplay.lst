A51 MACRO ASSEMBLER  CHECKSUMLEDDISPLAY                                                   09/03/2019 14:43:54 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\CheckSumLEDDisplay.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE ..\Codes\CheckSumLEDDisplay.asm SET(SMALL) DEBUG PRINT(.\Listings\Check
                      SumLEDDisplay.lst) OBJECT(.\Objects\CheckSumLEDDisplay.obj) EP

LOC  OBJ            LINE     SOURCE

0000                   1     org  0000h
0000 020150            2     ljmp main
0100                   3     org  0100h
                       4     
0100                   5     readNibbles:
0100 7590FF            6                     mov P1, #0xFF           ; set P1.7-P1.4 and configure P1.3-P1.0 as input
0103 7A05              7                     mov R2, #0x05
0105 120129            8                     lcall delayT            ; delay of 5 sec
0108 53900F            9                     anl P1, #0x0F           ; clear P1.7-P1.4
010B 7A01             10                     mov R2, #0x01
010D 120129           11                     lcall delayT            ; delay of 1 sec
0110 E590             12                     mov A,    P1            ; accept input into accumulator
0112 F8               13                     mov R0,   A                     ; store input in R1
0113 C4               14                     swap A                          ; store P1.3-P1.0 in P1.7-P1.4 (and vice ve
                             rsa)
0114 F590             15                     mov P1, A
0116 7A05             16                     mov R2, #0x05
0118 120129           17                     lcall delayT            ; delay of 5 sec
011B 22               18     ret
                      19     
011C                  20     packNibbles:
011C E54E             21                     mov  A,  0x4E
011E C4               22                     swap A
011F 54F0             23                     anl  A, #0xF0
0121 F9               24                     mov  R1, A
0122 E54F             25                     mov  A,  0x4F
0124 540F             26                     anl  A, #0x0F
0126 29               27                     add  A,  R1
0127 F6               28                     mov @R0, A
0128 22               29     ret
                      30     
0129                  31     delayT:
0129 7D14             32     back0:  mov  R5, #0x14
012B 7EC8             33     back1:  mov  R6, #0xC8
012D 7FF9             34     back2:  mov  R7, #0xF9
012F DFFE             35     back3:  djnz R7,  back3
0131 DEFA             36                     djnz R6,  back2
0133 DDF6             37                     djnz R5,  back1
0135 DAF2             38                     djnz R2,  back0
0137 22               39     ret
                      40     
0138                  41     checkSum:
0138 E550             42                     mov A, 0x50
013A 2551             43                     add A, 0x51
013C F4               44                     cpl A
013D 04               45                     inc A
013E F552             46                     mov 0x52, A
0140 F590             47                     mov  P1,  A
0142 7A02             48                     mov R2, #0x02
0144 120129           49                     lcall delayT
0147 C4               50                     swap A
0148 F590             51                     mov  P1,  A
014A 7A02             52                     mov R2, #0x02
014C 120129           53                     lcall delayT
014F 22               54     ret
                      55     
0150 120100           56     main:   lcall readNibbles
A51 MACRO ASSEMBLER  CHECKSUMLEDDISPLAY                                                   09/03/2019 14:43:54 PAGE     2

0153 884E             57                     mov   0x4E, R0
0155 120100           58                     lcall readNibbles
0158 884F             59                     mov   0x4F, R0
015A 7850             60                     mov   R0,  #0x50
015C 12011C           61                     lcall packNibbles
                      62                     
015F 120100           63                     lcall readNibbles
0162 884E             64                     mov   0x4E, R0
0164 120100           65                     lcall readNibbles
0167 884F             66                     mov   0x4F, R0
0169 7851             67                     mov   R0,  #0x51
016B 12011C           68                     lcall packNibbles
                      69                     
016E 120138           70                     lcall checkSum
                      71                     
0171 020150           72                     ljmp main
                      73     end
A51 MACRO ASSEMBLER  CHECKSUMLEDDISPLAY                                                   09/03/2019 14:43:54 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

BACK0. . . . . . .  C ADDR   0129H   A   
BACK1. . . . . . .  C ADDR   012BH   A   
BACK2. . . . . . .  C ADDR   012DH   A   
BACK3. . . . . . .  C ADDR   012FH   A   
CHECKSUM . . . . .  C ADDR   0138H   A   
DELAYT . . . . . .  C ADDR   0129H   A   
MAIN . . . . . . .  C ADDR   0150H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
PACKNIBBLES. . . .  C ADDR   011CH   A   
READNIBBLES. . . .  C ADDR   0100H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
