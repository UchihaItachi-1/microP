A51 MACRO ASSEMBLER  REACTIONTIMERSEC                                                     10/13/2019 15:32:11 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\ReactionTimerSec.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE ..\Codes\ReactionTimerSec.asm SET(SMALL) DEBUG PRINT(.\Listings\Reactio
                      nTimerSec.lst) OBJECT(.\Objects\ReactionTimerSec.obj) EP

LOC  OBJ            LINE     SOURCE

  0080                 1     LCD_rs          equ P0.0
  0081                 2     LCD_rw          equ P0.1
  0082                 3     LCD_en          equ P0.2
  00A0                 4     LCD_data        equ P2
                       5     
0000                   6     org             0000h
0000 02011D            7     ljmp    main
                       8     
000B                   9     org             000Bh
000B 020050           10     ljmp    T0ISR
                      11     
0050                  12     org             0050h
0050 C28D             13     T0ISR:  clr             TF0
0052 758A1C           14                     mov             TL0,    #00011100b
0055 758CFC           15                     mov             TH0,    #11111100b
0058 0E               16                     inc             R6
0059 BE0001           17                     cjne    R6,             #0x00,  ISREnd
005C 0D               18                     inc             R5
005D 32               19     ISREnd: reti
                      20     
005E 7880             21     LinesA: mov             R0,             #0x80
0060 7650             22                     mov             @R0,    #0x50            
0062 08               23                     inc             R0
0063 7652             24                     mov             @R0,    #0x52            
0065 08               25                     inc             R0
0066 7645             26                     mov             @R0,    #0x45            
0068 08               27                     inc             R0
0069 7653             28                     mov             @R0,    #0x53            
006B 08               29                     inc             R0
006C 7653             30                     mov             @R0,    #0x53            
006E 08               31                     inc             R0
006F 7620             32                     mov             @R0,    #0x20            
0071 08               33                     inc             R0
0072 7653             34                     mov             @R0,    #0x53            
0074 08               35                     inc             R0
0075 762F             36                     mov             @R0,    #0x2F            
0077 08               37                     inc             R0
0078 7657             38                     mov             @R0,    #0x57            
007A 08               39                     inc             R0
007B 7620             40                     mov             @R0,    #0x20            
007D 08               41                     inc             R0
007E 7650             42                     mov             @R0,    #0x50            
0080 08               43                     inc             R0
0081 7631             44                     mov             @R0,    #0x31            
0083 08               45                     inc             R0
0084 762E             46                     mov             @R0,    #0x2E            
0086 08               47                     inc             R0
0087 7630             48                     mov             @R0,    #0x30            
0089 08               49                     inc             R0
008A 7600             50                     mov             @R0,    #0x00            
008C 08               51                     inc             R0
                      52                     
008D 7641             53                     mov             @R0,    #0x41            
008F 08               54                     inc             R0
0090 7653             55                     mov             @R0,    #0x53            
0092 08               56                     inc             R0
0093 7620             57                     mov             @R0,    #0x20            
A51 MACRO ASSEMBLER  REACTIONTIMERSEC                                                     10/13/2019 15:32:11 PAGE     2

0095 08               58                     inc             R0
0096 764C             59                     mov             @R0,    #0x4C            
0098 08               60                     inc             R0
0099 7645             61                     mov             @R0,    #0x45            
009B 08               62                     inc             R0
009C 7644             63                     mov             @R0,    #0x44            
009E 08               64                     inc             R0
009F 7620             65                     mov             @R0,    #0x20            
00A1 08               66                     inc             R0
00A2 7647             67                     mov             @R0,    #0x47            
00A4 08               68                     inc             R0
00A5 764C             69                     mov             @R0,    #0x4C            
00A7 08               70                     inc             R0
00A8 764F             71                     mov             @R0,    #0x4F            
00AA 08               72                     inc             R0
00AB 7657             73                     mov             @R0,    #0x57            
00AD 08               74                     inc             R0
00AE 7653             75                     mov             @R0,    #0x53            
00B0 08               76                     inc             R0
00B1 7600             77                     mov             @R0,    #0x00            
00B3 08               78                     inc             R0
00B4 22               79     ret
00B5 7652             80     LinesB: mov             @R0,    #0x52            
00B7 08               81                     inc             R0
00B8 7645             82                     mov             @R0,    #0x45            
00BA 08               83                     inc             R0
00BB 7641             84                     mov             @R0,    #0x41            
00BD 08               85                     inc             R0
00BE 7643             86                     mov             @R0,    #0x43            
00C0 08               87                     inc             R0
00C1 7654             88                     mov             @R0,    #0x54            
00C3 08               89                     inc             R0
00C4 7649             90                     mov             @R0,    #0x49            
00C6 08               91                     inc             R0
00C7 764F             92                     mov             @R0,    #0x4F            
00C9 08               93                     inc             R0
00CA 764E             94                     mov             @R0,    #0x4E            
00CC 08               95                     inc             R0
00CD 7620             96                     mov             @R0,    #0x20            
00CF 08               97                     inc             R0
00D0 7654             98                     mov             @R0,    #0x54            
00D2 08               99                     inc             R0
00D3 7649            100                     mov             @R0,    #0x49            
00D5 08              101                     inc             R0
00D6 764D            102                     mov             @R0,    #0x4D            
00D8 08              103                     inc             R0
00D9 7645            104                     mov             @R0,    #0x45            
00DB 08              105                     inc             R0
00DC 7600            106                     mov             @R0,    #0x00            
00DE 08              107                     inc             R0
                     108                     
00DF 7643            109                     mov             @R0,    #0x43            
00E1 08              110                     inc             R0
00E2 764F            111                     mov             @R0,    #0x4F            
00E4 08              112                     inc             R0
00E5 7655            113                     mov             @R0,    #0x55            
00E7 08              114                     inc             R0
00E8 764E            115                     mov             @R0,    #0x4E            
00EA 08              116                     inc             R0
00EB 7654            117                     mov             @R0,    #0x54            
00ED 08              118                     inc             R0
00EE 7620            119                     mov             @R0,    #0x20            
00F0 08              120                     inc             R0
00F1 7649            121                     mov             @R0,    #0x49            
00F3 08              122                     inc             R0
00F4 7653            123                     mov             @R0,    #0x53            
A51 MACRO ASSEMBLER  REACTIONTIMERSEC                                                     10/13/2019 15:32:11 PAGE     3

00F6 08              124                     inc             R0
00F7 7620            125                     mov             @R0,    #0x20            
00F9 08              126                     inc             R0
00FA 7658            127                     mov             @R0,    #0x58            
00FC 08              128                     inc             R0
00FD 7658            129                     mov             @R0,    #0x58            
00FF 08              130                     inc             R0
0100 762E            131                     mov             @R0,    #0x2E            
0102 08              132                     inc             R0
0103 7658            133                     mov             @R0,    #0x58            
0105 08              134                     inc             R0
0106 7600            135                     mov             @R0,    #0x00            
0108 22              136     ret
0109                 137     initSeq:
0109 380C0106        138                     db      0x38, 0x0C, 0x01, 0x06
010D                 139     bin2ascii:
010D 30313233        140                     db      0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x41, 0
                             x42, 0x43, 0x44, 0x45, 0x46
0111 34353637                
0115 38394142                
0119 43444546                
                     141     
011D 75A000          142     main:   mov             P2,             #0x00                                              
                                                           
0120 759000          143                     mov             P1,             #0x00
0123 115E            144                     acall   LinesA
0125 11B5            145                     acall   LinesB
0127 510E            146                     acall   delay
0129 510E            147                     acall   delay
                     148                     
012B 31C7            149                     acall   lcd_init
012D 510E            150                     acall   delay
012F 510E            151                     acall   delay
0131 510E            152                     acall   delay
                     153                     
0133 7480            154                     mov             A,              #0x80
0135 31E1            155                     acall   lcd_command
0137 510E            156                     acall   delay
0139 7980            157                     mov             R1,             #0x80
013B 5101            158                     acall   lcd_sendstring
013D 510E            159                     acall   delay
                     160     
013F 74C0            161                     mov             A,              #0xC0
0141 31E1            162                     acall   lcd_command
0143 510E            163                     acall   delay
0145 798F            164                     mov             R1,             #0x8F
0147 5101            165                     acall   lcd_sendstring
                     166                     
0149 7D00            167                     mov             R5,             #00000000b
014B 7E00            168                     mov             R6,             #00000000b
014D 758A1C          169                     mov             TL0,    #00011100b
0150 758CFC          170                     mov             TH0,    #11111100b
0153 758901          171                     mov             TMOD,   #00000001b
0156 75A882          172                     mov             IE,             #10000010b
                     173                     
0159 75901F          174                     mov             P1,             #00011111b
015C D28C            175                     setb    TR0
015E E590            176     repeat: mov             A,              P1
0160 5401            177                     anl             A,              #00000001b
0162 B401F9          178                     cjne    A,              #00000001b,     repeat
0165 C28C            179                     clr             TR0
0167 C294            180                     clr             P1.4
0169 8D40            181                     mov             0x40,           R5
016B 8E41            182                     mov             0x41,           R6
                     183                     
                     184                     
A51 MACRO ASSEMBLER  REACTIONTIMERSEC                                                     10/13/2019 15:32:11 PAGE     4

016D 90010D          185                     mov             dptr,   #bin2ascii
0170 78B3            186                     mov             R0,             #0xB3
                     187                     
0172 E541            188                     mov             A,              0x41
0174 54F0            189                     anl             A,              #0xF0
0176 C4              190                     swap    A
0177 75F010          191                     mov             B,              #00010000b
017A A4              192                     mul             AB
017B F553            193                     mov             0x53,   A
017D 85F052          194                     mov             0x52,   B
                     195                     
0180 E540            196                     mov             A,              0x40
0182 540F            197                     anl             A,              #0x0F
0184 2552            198                     add             A,              0x52
0186 F552            199                     mov             0x52,   A               
                     200                     
0188 E540            201                     mov             A,              0x40
018A 54F0            202                     anl             A,              #0xF0
018C C4              203                     swap    A
018D 75F010          204                     mov             B,              #00010000b
0190 A4              205                     mul             AB
0191 2552            206                     add             A,              0x52
0193 85F051          207                     mov             0x51,   B
                     208                     
                     209                     
0196 75A000          210                     mov             P2,             #0x00
0199 759000          211                     mov             P1,             #0x00
019C 31C7            212                     acall   lcd_init
019E 510E            213                     acall   delay
01A0 510E            214                     acall   delay
01A2 510E            215                     acall   delay
                     216                     
01A4 7480            217                     mov             A,              #0x80
01A6 31E1            218                     acall   lcd_command
01A8 510E            219                     acall   delay
01AA 799C            220                     mov             R1,             #0x9C
01AC 5101            221                     acall   lcd_sendstring
01AE 510E            222                     acall   delay
                     223     
01B0 74C0            224                     mov             A,              #0xC0
01B2 31E1            225                     acall   lcd_command
01B4 510E            226                     acall   delay
01B6 79AA            227                     mov             R1,             #0xAA
01B8 5101            228                     acall   lcd_sendstring
                     229                     
01BA 7BBE            230                     mov             R3,             #190
01BC 7A64            231     CP2:    mov             R2,             #100
01BE 510E            232     CP3:    acall   delay
01C0 DAFC            233                     djnz    R2,             CP3
01C2 DBF8            234                     djnz    R3,             CP2
                     235     
01C4 02011D          236                     ljmp    main
                     237     
01C7                 238     lcd_init:                                                                                  
                                                                   
01C7 7F00            239                     mov             R7,             #0x00
01C9 900109          240                     mov             dptr,   #initSeq
01CC EF              241     CP1:    mov             A,              R7
01CD 93              242                     movc    A,              @A+dptr
01CE 0F              243                     inc             R7
01CF F5A0            244                     mov             LCD_data,       A
01D1 C280            245                     clr             LCD_rs
01D3 C281            246                     clr             LCD_rw
01D5 D282            247                     setb    LCD_en
01D7 510E            248                     acall   delay
01D9 C282            249                     clr             LCD_en
A51 MACRO ASSEMBLER  REACTIONTIMERSEC                                                     10/13/2019 15:32:11 PAGE     5

01DB 510E            250                     acall   delay
01DD BF04EC          251                     cjne    R7,             #0x04,  CP1
01E0 22              252     ret
                     253     
01E1                 254     lcd_command:
01E1 F5A0            255              mov   LCD_data, A
01E3 C280            256              clr   LCD_rs
01E5 C281            257              clr   LCD_rw
01E7 D282            258              setb  LCD_en
01E9 510E            259                      acall delay
01EB C282            260              clr   LCD_en
01ED 510E            261                      acall delay
01EF 22              262     ret
                     263     
01F0                 264     lcd_senddata:
01F0 F5A0            265                     mov   LCD_data, A
01F2 D280            266                     setb  LCD_rs
01F4 C281            267                     clr   LCD_rw
01F6 D282            268                     setb  LCD_en
01F8 510E            269                     acall delay
01FA C282            270                     clr   LCD_en
01FC 510E            271                     acall delay
01FE 510E            272                     acall delay
0200 22              273     ret
                     274     
0201                 275     lcd_sendstring:
0201 C0E0            276                     push  0x0E0
0203                 277     lcd_sendstring_loop:
0203 E7              278                     mov   A, @R1
0204 6005            279                     jz    exit
0206 31F0            280                     acall lcd_senddata
0208 09              281                     inc   R1
0209 80F8            282                     sjmp  LCD_sendstring_loop
020B D0E0            283     exit:   pop   0x0E0
020D 22              284     ret
                     285     
020E C000            286     delay:  push 0
0210 C001            287                     push 1
0212 7801            288                     mov  R0, #0x01
0214 79FF            289     loop2:  mov  R1, #0xFF
0216 D9FE            290     loop1:  djnz R1, loop1
0218 D8FA            291                     djnz R0, loop2
021A D001            292                     pop  1
021C D000            293                     pop  0 
021E 22              294     ret
                     295     
                     296     end
A51 MACRO ASSEMBLER  REACTIONTIMERSEC                                                     10/13/2019 15:32:11 PAGE     6

SYMBOL TABLE LISTING
------ ----- -------


N A M E              T Y P E  V A L U E   ATTRIBUTES

B . . . . . . . . .  D ADDR   00F0H   A   
BIN2ASCII . . . . .  C ADDR   010DH   A   
CP1 . . . . . . . .  C ADDR   01CCH   A   
CP2 . . . . . . . .  C ADDR   01BCH   A   
CP3 . . . . . . . .  C ADDR   01BEH   A   
DELAY . . . . . . .  C ADDR   020EH   A   
EXIT. . . . . . . .  C ADDR   020BH   A   
IE. . . . . . . . .  D ADDR   00A8H   A   
INITSEQ . . . . . .  C ADDR   0109H   A   
ISREND. . . . . . .  C ADDR   005DH   A   
LCD_COMMAND . . . .  C ADDR   01E1H   A   
LCD_DATA. . . . . .  D ADDR   00A0H   A   
LCD_EN. . . . . . .  B ADDR   0080H.2 A   
LCD_INIT. . . . . .  C ADDR   01C7H   A   
LCD_RS. . . . . . .  B ADDR   0080H.0 A   
LCD_RW. . . . . . .  B ADDR   0080H.1 A   
LCD_SENDDATA. . . .  C ADDR   01F0H   A   
LCD_SENDSTRING. . .  C ADDR   0201H   A   
LCD_SENDSTRING_LOOP  C ADDR   0203H   A   
LINESA. . . . . . .  C ADDR   005EH   A   
LINESB. . . . . . .  C ADDR   00B5H   A   
LOOP1 . . . . . . .  C ADDR   0216H   A   
LOOP2 . . . . . . .  C ADDR   0214H   A   
MAIN. . . . . . . .  C ADDR   011DH   A   
P0. . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . .  D ADDR   00A0H   A   
REPEAT. . . . . . .  C ADDR   015EH   A   
T0ISR . . . . . . .  C ADDR   0050H   A   
TF0 . . . . . . . .  B ADDR   0088H.5 A   
TH0 . . . . . . . .  D ADDR   008CH   A   
TL0 . . . . . . . .  D ADDR   008AH   A   
TMOD. . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . .  B ADDR   0088H.4 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
