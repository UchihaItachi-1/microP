A51 MACRO ASSEMBLER  LCDROLLNAME                                                          09/13/2019 13:33:36 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\LCDRollName.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE ..\Codes\LCDRollName.asm SET(SMALL) DEBUG PRINT(.\Listings\LCDRollName.
                      lst) OBJECT(.\Objects\LCDRollName.obj) EP

LOC  OBJ            LINE     SOURCE

  0080                 1     LCD_rs   equ P0.0
  0081                 2     LCD_rw   equ P0.1
  0082                 3     LCD_en   equ P0.2
  00A0                 4     LCD_data equ P2
                       5     
0000                   6     org      0000h
0000 020200            7     ljmp main
                       8     
0100                   9     org  0100h
0100 78E1             10     fname:  mov  R0, #0xE1
0102 7631             11                     mov @R0, #0x31
0104 08               12                     inc  R0
0105 7637             13                     mov @R0, #0x37
0107 08               14                     inc  R0
0108 7630             15                     mov @R0, #0x30
010A 08               16                     inc  R0
010B 7630             17                     mov @R0, #0x30
010D 08               18                     inc  R0
010E 7637             19                     mov @R0, #0x37
0110 08               20                     inc  R0
0111 7630             21                     mov @R0, #0x30
0113 08               22                     inc  R0
0114 7630             23                     mov @R0, #0x30
0116 08               24                     inc  R0
0117 7635             25                     mov @R0, #0x35
0119 08               26                     inc  R0
011A 7630             27                     mov @R0, #0x30
011C 08               28                     inc  R0
011D 7600             29                     mov @R0, #0x00
011F 22               30     ret
0120 78F1             31     roll:   mov  R0, #0xF1
0122 7641             32                     mov @R0, #0x41
0124 08               33                     inc  R0
0125 7661             34                     mov @R0, #0x61
0127 08               35                     inc  R0
0128 7672             36                     mov @R0, #0x72
012A 08               37                     inc  R0
012B 766F             38                     mov @R0, #0x6F
012D 08               39                     inc  R0
012E 766E             40                     mov @R0, #0x6E
0130 08               41                     inc  R0
0131 7620             42                     mov @R0, #0x20
0133 08               43                     inc  R0
0134 764A             44                     mov @R0, #0x4A
0136 08               45                     inc  R0
0137 766F             46                     mov @R0, #0x6F
0139 08               47                     inc  R0
013A 7668             48                     mov @R0, #0x68
013C 08               49                     inc  R0
013D 766E             50                     mov @R0, #0x6E
013F 08               51                     inc  R0
0140 7620             52                     mov @R0, #0x20
0142 08               53                     inc  R0
0143 7653             54                     mov @R0, #0x53
0145 08               55                     inc  R0
0146 7661             56                     mov @R0, #0x61
0148 08               57                     inc  R0
A51 MACRO ASSEMBLER  LCDROLLNAME                                                          09/13/2019 13:33:36 PAGE     2

0149 7662             58                     mov @R0, #0x62
014B 08               59                     inc  R0
014C 7675             60                     mov @R0, #0x75
014E 08               61                     inc  R0
014F 7600             62                     mov @R0, #0x00
0151 22               63     ret
0152 380C0106         64     initSeq:db 0x38, 0x0C, 0x01, 0x06
                      65     
0200                  66     org      0200h
0200 75A000           67     main:   mov P2,#0x00
0203 759000           68                     mov P1,#0x00
0206 3100             69                     acall fname
0208 3120             70                     acall roll
020A 5175             71                     acall delay
020C 5175             72                     acall delay
                      73                     
020E 512E             74                     acall lcd_init
0210 5175             75                     acall delay
0212 5175             76                     acall delay
0214 5175             77                     acall delay
                      78                     
0216 7480             79                     mov   A,  #0x80
0218 5148             80                     acall lcd_command
021A 5175             81                     acall delay
021C 79E1             82                     mov   R1, #0xE1
021E 5168             83                     acall lcd_sendstring
0220 5175             84                     acall delay
                      85     
0222 74C0             86                     mov   A,  #0xC0
0224 5148             87                     acall lcd_command
0226 5175             88                     acall delay
0228 79F1             89                     mov   R1, #0xF1
022A 5168             90                     acall lcd_sendstring
022C 80FE             91     here:   sjmp  here
                      92     
022E                  93     lcd_init:
022E 7F00             94                     mov   R7, #0x00
0230 900152           95                     mov   dptr, #initSeq
0233 EF               96     CP1:    mov   A,  R7
0234 93               97                     movc  A,  @A+dptr
0235 0F               98                     inc   R7
0236 F5A0             99                     mov   LCD_data, A
0238 C280            100                     clr   LCD_rs
023A C281            101                     clr   LCD_rw
023C D282            102                     setb  LCD_en
023E 5175            103                     acall delay
0240 C282            104                     clr   LCD_en
0242 5175            105                     acall delay
0244 BF04EC          106                     cjne  R7, #0x04, CP1
0247 22              107     ret
                     108     
0248                 109     lcd_command:
0248 F5A0            110              mov   LCD_data, A
024A C280            111              clr   LCD_rs
024C C281            112              clr   LCD_rw
024E D282            113              setb  LCD_en
0250 5175            114                      acall delay
0252 C282            115              clr   LCD_en
0254 5175            116                      acall delay
0256 22              117     ret
                     118     
0257                 119     lcd_senddata:
0257 F5A0            120                     mov   LCD_data, A
0259 D280            121                     setb  LCD_rs
025B C281            122                     clr   LCD_rw
025D D282            123                     setb  LCD_en
A51 MACRO ASSEMBLER  LCDROLLNAME                                                          09/13/2019 13:33:36 PAGE     3

025F 5175            124                     acall delay
0261 C282            125                     clr   LCD_en
0263 5175            126                     acall delay
0265 5175            127                     acall delay
0267 22              128     ret
                     129     
0268                 130     lcd_sendstring:
0268 C0E0            131                     push  0x0E0
026A                 132     lcd_sendstring_loop:
026A E7              133                     mov   A, @R1
026B 6005            134                     jz    exit
026D 5157            135                     acall lcd_senddata
026F 09              136                     inc   R1
0270 80F8            137                     sjmp  LCD_sendstring_loop
0272 D0E0            138     exit:   pop   0x0E0
0274 22              139     ret
                     140     
0275 C000            141     delay:  push 0
0277 C001            142                     push 1
0279 7801            143                     mov  R0, #0x01
027B 79FF            144     loop2:  mov  R1, #0xFF
027D D9FE            145     loop1:  djnz R1, loop1
027F D8FA            146                     djnz R0, loop2
0281 D001            147                     pop  1
0283 D000            148                     pop  0 
0285 22              149     ret
                     150     
                     151     end
A51 MACRO ASSEMBLER  LCDROLLNAME                                                          09/13/2019 13:33:36 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E              T Y P E  V A L U E   ATTRIBUTES

CP1 . . . . . . . .  C ADDR   0233H   A   
DELAY . . . . . . .  C ADDR   0275H   A   
EXIT. . . . . . . .  C ADDR   0272H   A   
FNAME . . . . . . .  C ADDR   0100H   A   
HERE. . . . . . . .  C ADDR   022CH   A   
INITSEQ . . . . . .  C ADDR   0152H   A   
LCD_COMMAND . . . .  C ADDR   0248H   A   
LCD_DATA. . . . . .  D ADDR   00A0H   A   
LCD_EN. . . . . . .  B ADDR   0080H.2 A   
LCD_INIT. . . . . .  C ADDR   022EH   A   
LCD_RS. . . . . . .  B ADDR   0080H.0 A   
LCD_RW. . . . . . .  B ADDR   0080H.1 A   
LCD_SENDDATA. . . .  C ADDR   0257H   A   
LCD_SENDSTRING. . .  C ADDR   0268H   A   
LCD_SENDSTRING_LOOP  C ADDR   026AH   A   
LOOP1 . . . . . . .  C ADDR   027DH   A   
LOOP2 . . . . . . .  C ADDR   027BH   A   
MAIN. . . . . . . .  C ADDR   0200H   A   
P0. . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . .  D ADDR   00A0H   A   
ROLL. . . . . . . .  C ADDR   0120H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
